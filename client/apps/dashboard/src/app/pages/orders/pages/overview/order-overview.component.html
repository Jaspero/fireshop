<ng-container *ngIf="data$ | async as data">
  <mat-toolbar color="primary">
    <a mat-icon-button routerLink="/orders" aria-label="Back" matTooltip="Back">
      <mat-icon>arrow_back</mat-icon>
    </a>
    <span>{{data.order.customerId ? data.order.customerName : 'Anonymous'}} order</span>
    <div class="f1"></div>
    <button mat-flat-button [routerLink]="['/customers/', data.order.customerId]">Customer info</button>
  </mat-toolbar>

  <section class="grid p-y-m">
    <div class="col-12">
      <mat-card>
        <mat-nav-list>
          <h3 mat-subheader>Products in order</h3>
          <mat-list-item *ngFor="let ordItems of data.order.orderItems; index as index" [routerLink]="['/products/' + ordItems]">
            <p mat-line>{{ordItems}}</p>
            <p mat-line>{{data.order.orderItemsData[index].quantity}}x @ {{data.order.orderItemsData[index].price | sp}}</p>
            <ng-container *ngIf="data.order.customerId && data.reviews[index]">
              <p class="fs-small c-d-secondary m-r-xs">{{data.reviews[index][0].rating}}/5</p>
              <mat-icon [matTooltip]="data.reviews[index][0].comment">info</mat-icon>
            </ng-container>
          </mat-list-item>
        </mat-nav-list>
      </mat-card>
    </div>
  </section>
</ng-container>
